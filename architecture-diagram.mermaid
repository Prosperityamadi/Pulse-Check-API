flowchart TD
    A["Device sends POST /monitors"] --> B["API validates request"]
    B --> C{"Valid data?"}
    C -- No --> D["Return 400 Bad Request"]
    C -- Yes --> E{"Monitor exists?"}
    E -- Yes --> F["Return 409 Conflict"]
    E -- No --> G["Store monitor in memory"]
    G --> H["Start countdown timer"]
    H --> I["Return 201 Created"]

    I --> J{"Waiting for heartbeat..."}

    J --> K["Device sends heartbeat"]
    K --> L["Reset timer to full duration"]
    L --> J

    J --> M["Timer reaches 0"]
    M --> N["Trigger alert: Device is down!"]
    N --> O["Set status to 'down'"]

    J --> P["Device sends pause request"]
    P --> Q["Cancel timer"]
    Q --> R["Set status to 'paused'"]
    R --> S{"Waiting for heartbeat to resume..."}
    S --> K
